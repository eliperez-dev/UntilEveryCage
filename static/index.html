<!--
    Until Every Cage is Empty
    Copyright (C) 2025 Eli Perez 

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU Affero General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
    GNU Affero General Public License for more details.

    You should have received a copy of the GNU Affero General Public License
    along with this program. If not, see <https://www.gnu.org/licenses/>.

    Contact the developer directly at untileverycageproject@protonmail.com
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover">
    <title>Until Every Cage is Empty</title>
    <meta name="title" content="Until Every Cage is Empty" />
    <meta name="description" content="An interactive map exposing the infrastructure of animal exploitation in the United States. Visualize thousands of facilities including slaughterhouses, processing plants, labs, farms/breeders, dealers, and exhibitors." />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://untileverycage.org/" />
    <meta property="og:title" content="Until Every Cage is Empty" />
    <meta property="og:description" content="An interactive map exposing the infrastructure of animal exploitation in the United States. Visualize thousands of facilities including slaughterhouses, processing plants, labs, farms/breeders, dealers, and exhibitors." />
    <meta property="og:image" content="https://untileverycage.org/assets/icon.png" />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://untileverycage.org/" />
    <meta property="twitter:title" content="Until Every Cage is Empty" />
    <meta property="twitter:description" content="An interactive map exposing the infrastructure of animal exploitation in the United States. Visualize thousands of facilities including slaughterhouses, processing plants, labs, farms/breeders, dealers, and exhibitors." />
    <meta property="twitter:image" content="https://untileverycage.org/assets/icon.png" />


    <link rel="icon" type="image/png" href="assets/icon.png">
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" />
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="map-filter-styles.css" />
</head>

<body>


<header class="site-header">
    <div class="header-container">
        <h1>Until Every Cage is Empty</h1>
        <nav class="main-navigation">
            <ul class="nav-menu">
                <li><a href="index.html" class="nav-link active">Map</a></li>
                <li><a href="howtouse.html" class="nav-link">How To Use</a></li>
                <li><a href="about.html" class="nav-link">About</a></li>
                <!-- <li><a href="contribute.html" class="nav-link">Contribute</a></li> -->
            </ul>
        </nav>
    </div>
</header>
<div id="map-container">
    <div id="map">
        <!-- Loading indicator -->
        <div id="loading-indicator">
            <div class="loading-spinner"></div>
            <div class="loading-text">Loading map data...</div>
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill"></div>
                </div>
                <div class="progress-percentage">0%</div>
            </div>
        </div>
    </div>

    <!-- Drawer Toggle Button -->
    <button id="drawer-toggle-btn" class="drawer-toggle-btn" type="button" aria-label="Toggle search drawer" title="Open search and filters">
        <span class="drawer-toggle-icon">‚ò∞</span>
    </button>

    <!-- Side Drawer -->
    <div id="search-drawer" class="search-drawer" role="region" aria-label="Search and filter panel">
        <div class="drawer-header">
            <h2>Search & Filter</h2>
            <button id="drawer-close-btn" class="drawer-close-btn" type="button" aria-label="Close search drawer">‚úï</button>
        </div>

        <div class="drawer-content">
            <!-- Search Section -->
            <div class="drawer-section search-section">
                <h3 class="section-title">Search</h3>
                <input type="text" id="name-search-input" placeholder="Search facilities, animals..." aria-label="Search facilities by name" class="search-input">
            </div>

            <!-- Location Section -->
            <div class="drawer-section">
                <h3 class="section-title">Location</h3>
                <div class="location-filters">
                    <select id="country-selector" aria-label="Filter by country" class="filter-select">
                        <option value="all">All Countries</option>
                    </select>
                    <select id="state-selector" aria-label="Filter by state/province" class="filter-select">
                        <option value="all">All States/Provinces</option>
                    </select>
                </div>
            </div>

            <!-- Facility Types Section -->
            <div class="drawer-section">
                <h3 class="section-title">Facility Types</h3>
                <div class="types-grid">
                    <div class="checkbox-item">
                        <input type="checkbox" id="slaughterhousesCheckbox" checked> 
                        <label for="slaughterhousesCheckbox">üî¥ Slaughterhouses</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="meatProcessingPlantsCheckbox" checked>
                        <label for="meatProcessingPlantsCheckbox">‚ö™Ô∏è Processing</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="testingLabsCheckbox" checked>
                        <label for="testingLabsCheckbox">üü£ Labs</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="breedersCheckbox" checked>
                        <label for="breedersCheckbox">üü° Farms / Breeders</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="dealersCheckbox" checked>
                        <label for="dealersCheckbox">üü† Dealers</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="exhibitorsCheckbox" checked>
                        <label for="exhibitorsCheckbox">üü¢ Exhibitors/Zoos</label>
                    </div>
                </div>
            </div>

            <!-- Export & Settings Section -->
            <div class="drawer-section">
                <h3 class="section-title">Export & Settings</h3>
                <div class="action-buttons">
                    <button id="share-view-btn" class="action-btn primary-btn">Share View</button>
                    <button id="download-csv-btn" class="action-btn primary-btn">Download CSV</button>
                    <button id="reset-filters-btn" class="action-btn secondary-btn">Reset Filters</button>
                </div>
            </div>

            <!-- Stats Section -->
            <div class="drawer-section stats-section">
                <div id="stats-container"></div>
            </div>
        </div>
    </div>

    <!-- Drawer Backdrop -->
    <div id="drawer-backdrop" class="drawer-backdrop"></div>
</div>




<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
<script type="module" src="app.js"></script>

<!-- Footer will be loaded here -->
<!-- <div id="footer-placeholder"></div>

<script src="footer.js"></script> -->
</body>
</html>